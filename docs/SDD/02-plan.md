# WordPress 網站架設專案 - Plan（專案計畫）

## 專案架構設計

### 整體架構圖

```
┌─────────────────────────────────────────┐
│           Docker Compose Stack          │
├─────────────────────────────────────────┤
│                                         │
│  ┌──────────┐      ┌──────────────┐   │
│  │  Nginx   │──────│   WordPress  │   │
│  │ (LTS)    │      │   (LTS)      │   │
│  │ Port 80  │      │   PHP-FPM    │   │
│  └──────────┘      └──────┬───────┘   │
│                           │            │
│                    ┌──────▼───────┐   │
│                    │    MySQL     │   │
│                    │   (LTS)      │   │
│                    │   Port 3306  │   │
│                    └──────────────┘   │
│                                         │
│  ┌──────────────────────────────────┐ │
│  │      Volume Mounts               │ │
│  │  - wp_data (WordPress files)    │ │
│  │  - db_data (MySQL data)         │ │
│  │  - nginx_config                 │ │
│  │  - php_config                   │ │
│  └──────────────────────────────────┘ │
└─────────────────────────────────────────┘
```

## 實施階段

### 階段一：環境準備和配置

#### 1.1 專案結構建立
- [x] 創建專案目錄結構
- [x] 創建 SDD 文檔目錄
- [x] 創建配置檔案目錄
- [x] 創建測試目錄

#### 1.2 Docker Compose 配置
- [ ] 定義服務架構（nginx、wordpress、db）
- [ ] 配置網路設定
- [ ] 配置 Volume 掛載
- [ ] 配置環境變數
- [ ] 配置服務依賴關係

#### 1.3 組件配置檔案
- [ ] Nginx 配置（反向代理、PHP-FPM 連接）
- [ ] PHP-FPM 配置（與 Nginx 整合）
- [ ] MySQL 初始化腳本
- [ ] WordPress 環境變數配置

### 階段二：服務配置和優化

#### 2.1 Nginx 配置
- [ ] 基本反向代理設定
- [ ] PHP-FPM upstream 配置
- [ ] 靜態檔案服務配置
- [ ] 安全標頭設定
- [ ] 日誌配置

#### 2.2 PHP 配置
- [ ] PHP-FPM pool 配置
- [ ] PHP 運行參數優化
- [ ] WordPress 所需擴展啟用
- [ ] 記憶體和執行時間限制

#### 2.3 MySQL 配置
- [ ] 資料庫初始化
- [ ] 用戶權限設定
- [ ] 字符集配置（utf8mb4）
- [ ] 性能參數調優

#### 2.4 WordPress 配置
- [ ] 官方鏡像使用
- [ ] 環境變數配置
- [ ] 檔案權限設定
- [ ] 預設配置優化

### 階段三：測試開發

#### 3.1 Unit Test
- [ ] 容器啟動測試
- [ ] 服務健康檢查測試
- [ ] 資料庫連接測試
- [ ] 配置檔案驗證測試
- [ ] 環境變數驗證測試

#### 3.2 E2E Test
- [ ] WordPress 安裝流程測試
- [ ] 前端頁面訪問測試
- [ ] 管理後台訪問測試
- [ ] 資料庫操作測試
- [ ] 檔案上傳測試

### 階段四：文檔和驗證

#### 4.1 文檔完善
- [ ] README.md 使用說明
- [ ] 環境變數說明
- [ ] 故障排除指南
- [ ] 部署流程文檔

#### 4.2 最終驗證
- [ ] 完整環境測試
- [ ] 所有測試通過
- [ ] 性能基準測試
- [ ] 安全檢查

## 技術決策

### 版本選擇原則
1. **LTS 優先**：所有組件選擇最新 LTS 版本
2. **相容性**：確保 WordPress 與 PHP 版本相容
3. **穩定性**：優先選擇穩定版本而非最新版本
4. **官方支援**：優先使用官方維護的鏡像

### 架構決策
1. **分離式架構**：Nginx、PHP、MySQL 分別容器化
2. **反向代理**：使用 Nginx 作為前端反向代理
3. **資料持久化**：使用 Docker Volume 持久化資料
4. **環境變數**：使用 .env 檔案管理敏感資訊

### 安全決策
1. **最小權限原則**：資料庫用戶僅授予必要權限
2. **環境變數隔離**：敏感資訊不寫入配置檔案
3. **網路隔離**：使用 Docker 內部網路
4. **定期更新**：使用最新安全補丁版本

## 風險管理

### 潛在風險
1. **版本不相容**：WordPress 與 PHP 版本不相容
   - **緩解措施**：參考官方相容性矩陣

2. **資料遺失**：容器刪除導致資料遺失
   - **緩解措施**：使用 Volume 持久化，定期備份

3. **性能問題**：預設配置性能不佳
   - **緩解措施**：根據需求調整配置參數

4. **安全漏洞**：使用過時版本
   - **緩解措施**：定期更新到最新 LTS 版本

## 驗收標準

### 功能驗收
- [ ] 所有服務正常啟動
- [ ] WordPress 可以正常訪問
- [ ] 資料庫連接正常
- [ ] 檔案上傳功能正常
- [ ] 管理後台可以正常使用

### 品質驗收
- [ ] 所有 Unit Test 通過（100%）
- [ ] 所有 E2E Test 通過（100%）
- [ ] 無重大安全漏洞
- [ ] 文檔完整且準確

### 性能驗收
- [ ] 首頁載入時間 < 2 秒
- [ ] 資料庫查詢響應時間 < 100ms
- [ ] 容器啟動時間 < 30 秒

## 專案時程表

| 階段 | 任務 | 預計時間 | 狀態 |
|------|------|----------|------|
| 階段一 | 環境準備和配置 | 2-3 小時 | 進行中 |
| 階段二 | 服務配置和優化 | 1-2 小時 | 待開始 |
| 階段三 | 測試開發 | 1-2 小時 | 待開始 |
| 階段四 | 文檔和驗證 | 1 小時 | 待開始 |

**總預計時間**：5-8 小時
